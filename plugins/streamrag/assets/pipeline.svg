<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 120" fill="none">
  <defs>
    <linearGradient id="pbg" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#0f0f23"/>
      <stop offset="100%" style="stop-color:#1a1a3e"/>
    </linearGradient>
    <linearGradient id="step1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06b6d4"/>
      <stop offset="100%" style="stop-color:#0891b2"/>
    </linearGradient>
    <linearGradient id="step2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#7c3aed"/>
    </linearGradient>
    <linearGradient id="step3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1"/>
      <stop offset="100%" style="stop-color:#4f46e5"/>
    </linearGradient>
    <linearGradient id="step4" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899"/>
      <stop offset="100%" style="stop-color:#db2777"/>
    </linearGradient>
    <linearGradient id="step5" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
  </defs>

  <rect width="900" height="120" rx="12" fill="url(#pbg)"/>

  <!-- Step 1: Extract -->
  <rect x="25" y="20" width="140" height="80" rx="10" fill="url(#step1)" opacity="0.9"/>
  <text x="95" y="52" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">EXTRACT</text>
  <text x="95" y="72" font-family="system-ui, sans-serif" font-size="10" fill="white" opacity="0.75" text-anchor="middle">Parse AST entities</text>

  <!-- Arrow 1 -->
  <path d="M 175 60 L 195 60" stroke="#475569" stroke-width="2" marker-end="url(#arrow)"/>
  <polygon points="195,55 205,60 195,65" fill="#475569"/>

  <!-- Step 2: Diff -->
  <rect x="210" y="20" width="140" height="80" rx="10" fill="url(#step2)" opacity="0.9"/>
  <text x="280" y="52" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">DIFF</text>
  <text x="280" y="72" font-family="system-ui, sans-serif" font-size="10" fill="white" opacity="0.75" text-anchor="middle">Compute minimal delta</text>

  <!-- Arrow 2 -->
  <polygon points="360,55 370,60 360,65" fill="#475569"/>

  <!-- Step 3: Patch -->
  <rect x="380" y="20" width="140" height="80" rx="10" fill="url(#step3)" opacity="0.9"/>
  <text x="450" y="52" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">PATCH</text>
  <text x="450" y="72" font-family="system-ui, sans-serif" font-size="10" fill="white" opacity="0.75" text-anchor="middle">Update graph in-place</text>

  <!-- Arrow 3 -->
  <polygon points="530,55 540,60 530,65" fill="#475569"/>

  <!-- Step 4: Resolve -->
  <rect x="550" y="20" width="140" height="80" rx="10" fill="url(#step4)" opacity="0.9"/>
  <text x="620" y="52" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">RESOLVE</text>
  <text x="620" y="72" font-family="system-ui, sans-serif" font-size="10" fill="white" opacity="0.75" text-anchor="middle">Link cross-file edges</text>

  <!-- Arrow 4 -->
  <polygon points="700,55 710,60 700,65" fill="#475569"/>

  <!-- Step 5: Propagate -->
  <rect x="720" y="20" width="155" height="80" rx="10" fill="url(#step5)" opacity="0.9"/>
  <text x="797" y="52" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="white" text-anchor="middle">PROPAGATE</text>
  <text x="797" y="72" font-family="system-ui, sans-serif" font-size="10" fill="white" opacity="0.75" text-anchor="middle">Cascade to dependents</text>
</svg>
